import Layout from '../../components/Layout'; import { useEffect,useState } from 'react'; import Link from 'next/link'; import PostCard from '../../components/PostCard'; export default function PostsPage(){ const [items,setItems]=useState([]); const [err,setErr]=useState(''); useEffect(()=>{ (async()=>{ try{ const res=await fetch(`${process.env.NEXT_PUBLIC_API_URL||'http://localhost:4000'}/api/posts`); const data=await res.json(); setItems(data); }catch(e){ setErr(e.message); } })(); },[]); return (<Layout><div className="flex justify-between items-center mb-4"><h1 className="text-2xl font-bold">Posts</h1><Link href="/posts/new" className="px-3 py-1 rounded bg-black text-white">+ New Post</Link></div>{err&&<p className="text-red-600">{err}</p>}<div className="grid gap-4">{items.map(p=> <PostCard key={p.id} post={p} />)}</div></Layout>); }
